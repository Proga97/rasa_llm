version: "3.1"

intents:
  - session_start

slots:
  joke:
    type: text
    mappings:
      - type: from_llm

responses:
  utter_greet:
    - text: "Hi there, I'm PunAmstrong, powered by RASA-CaLM! Are you ready for some laughs?"
      metadata:
        rephrase: True
  
  utter_ask_joke:
    - text: "Please remind me of the pun or joke you want me to explain."
      metadata:
        rephrase: True

  utter_response_joke:
    - text: "Ha ha ha! That's a good one! Do you want me to explain it?"
      metadata:
        rephrase: True

  utter_free_chitchat_response:
  - text: "placeholder_this_utterance_needs_the_rephraser"
    metadata:
      rephrase: True
      rephrase_prompt: |
        You are an incredibly friendly assistant. Generate a short
        response to the user's comment in simple english. You love
        to joke around and make people laugh.

        User: {{current_input}}
        Response:

  utter_explain_joke:
    - text: "placeholder_this_utterance_needs_the_rephraser"
      metadata:
        rephrase: True
        rephrase_prompt: |
          You are an incredibly friendly assistant. Explain the 
          humor in the joke that the user has shared. The 
          explanation should be simple and easy to understand.

          User: {{current_input}}
          Joke: {{joke}}
          Response:

actions:
  - action_explain_joke